{"ast":null,"code":"import React, { Component } from 'react';\nimport PropTypes from 'prop-types'; // istanbul ignore next\n\nvar statusDiv = typeof document === 'undefined' ? null : document.getElementById('a11y-status-message');\nvar statuses = [];\n\nfunction setStatus(status) {\n  var isSameAsLast = statuses[statuses.length - 1] === status;\n\n  if (isSameAsLast) {\n    statuses = [].concat(statuses, [status]);\n  } else {\n    statuses = [status];\n  }\n\n  var div = getStatusDiv(); // Remove previous children\n\n  while (div.lastChild) {\n    div.removeChild(div.firstChild);\n  }\n\n  statuses.filter(Boolean).forEach(function (statusItem, index) {\n    div.appendChild(getStatusChildDiv(statusItem, index));\n  });\n}\n\nfunction getStatusChildDiv(status, index) {\n  var display = index === statuses.length - 1 ? 'block' : 'none';\n  var childDiv = document.createElement('div');\n  childDiv.style.display = display;\n  childDiv.textContent = status;\n  return childDiv;\n}\n\nfunction getStatusDiv() {\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = document.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'assertive');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  document.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n\nfunction findParent(finder, node, rootNode) {\n  if (node !== null && node !== rootNode.parentNode) {\n    if (finder(node)) {\n      if (node === document.body && node.scrollTop === 0) {\n        // in chrome body.scrollTop always return 0\n        return document.documentElement;\n      }\n\n      return node;\n    } else {\n      return findParent(finder, node.parentNode, rootNode);\n    }\n  } else {\n    return null;\n  }\n}\n/**\n * Get the closest element that scrolls\n * @param {HTMLElement} node - the child element to start searching for scroll parent at\n * @param {HTMLElement} rootNode - the root element of the component\n * @return {HTMLElement} the closest parentNode that scrolls\n */\n\n\nvar getClosestScrollParent = findParent.bind(null, function (node) {\n  return node.scrollHeight > node.clientHeight;\n});\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node - the element that should scroll into view\n * @param {HTMLElement} rootNode - the root element of the component\n * @param {Boolean} alignToTop - align element to the top of the visible area of the scrollable ancestor\n */\n// eslint-disable-next-line complexity\n\nfunction scrollIntoView(node, rootNode) {\n  var scrollParent = getClosestScrollParent(node, rootNode);\n\n  if (scrollParent === null) {\n    return;\n  }\n\n  var scrollParentStyles = getComputedStyle(scrollParent);\n  var scrollParentRect = scrollParent.getBoundingClientRect();\n  var scrollParentBorderTopWidth = parseInt(scrollParentStyles.borderTopWidth, 10);\n  var scrollParentBorderBottomWidth = parseInt(scrollParentStyles.borderBottomWidth, 10);\n  var bordersWidth = scrollParentBorderTopWidth + scrollParentBorderBottomWidth;\n  var scrollParentTop = scrollParentRect.top + scrollParentBorderTopWidth;\n  var nodeRect = node.getBoundingClientRect();\n\n  if (nodeRect.top < 0 && scrollParentRect.top < 0) {\n    scrollParent.scrollTop += nodeRect.top;\n    return;\n  }\n\n  if (nodeRect.top < 0) {\n    // the item is above the viewport and the parent is not above the viewport\n    scrollParent.scrollTop += nodeRect.top - scrollParentTop;\n    return;\n  }\n\n  if (nodeRect.top > 0 && scrollParentRect.top < 0) {\n    if (scrollParentRect.bottom > 0 && nodeRect.bottom + bordersWidth > scrollParentRect.bottom) {\n      // the item is below scrollable area\n      scrollParent.scrollTop += nodeRect.bottom - scrollParentRect.bottom + bordersWidth;\n    } // item and parent top are on different sides of view top border (do nothing)\n\n\n    return;\n  }\n\n  var nodeOffsetTop = nodeRect.top + scrollParent.scrollTop;\n  var nodeTop = nodeOffsetTop - scrollParentTop;\n\n  if (nodeTop < scrollParent.scrollTop) {\n    // the item is above the scrollable area\n    scrollParent.scrollTop = nodeTop;\n  } else if (nodeTop + nodeRect.height + bordersWidth > scrollParent.scrollTop + scrollParentRect.height) {\n    // the item is below the scrollable area\n    scrollParent.scrollTop = nodeTop + nodeRect.height - scrollParentRect.height + bordersWidth;\n  } // the item is within the scrollable area (do nothing)\n\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId = void 0;\n  return wrapper;\n\n  function wrapper() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(undefined, args);\n    }, time);\n  }\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction composeEventHandlers() {\n  for (var _len2 = arguments.length, fns = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      fn && fn.apply(undefined, [event].concat(args)); // TODO: remove everything after the || in the next breaking change\n\n      return event.preventDownshiftDefault || event.defaultPrevented;\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Returns the first argument that is not undefined\n * @param {...*} args the arguments\n * @return {*} the defined value\n */\n\n\nfunction firstDefined() {\n  for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    args[_key4] = arguments[_key4];\n  }\n\n  return args.find(function (a) {\n    return typeof a !== 'undefined';\n  });\n} // eslint-disable-next-line complexity\n\n\nfunction getA11yStatusMessage(_ref) {\n  var isOpen = _ref.isOpen,\n      highlightedItem = _ref.highlightedItem,\n      selectedItem = _ref.selectedItem,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount,\n      itemToString = _ref.itemToString;\n\n  if (!isOpen) {\n    if (selectedItem) {\n      return itemToString(selectedItem);\n    } else {\n      return '';\n    }\n  }\n\n  if (!resultCount) {\n    return 'No results.';\n  } else if (!highlightedItem || resultCount !== previousResultCount) {\n    return resultCount + ' ' + (resultCount === 1 ? 'result is' : 'results are') + ' available, use up and down arrow keys to navigate.';\n  }\n\n  return itemToString(highlightedItem);\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  /* istanbul ignore if */\n  if (element.nodeName) {\n    // then this is preact\n    return typeof element.nodeName === 'string';\n  } else {\n    // then we assume this is react\n    return typeof element.type === 'string';\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  // props for react, attributes for preact\n  return element.props ||\n  /* istanbul ignore next (preact) */\n  element.attributes;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  throw new Error('The property \"' + propName + '\" is required in \"' + fnName + '\"');\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state The state object\n * @return {Object} State that is relevant to downshift\n */\n\nfunction pickState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a KeyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return 'Arrow' + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n/* eslint camelcase:0 */\n\n\nvar Downshift = function (_Component) {\n  inherits(Downshift, _Component);\n\n  function Downshift() {\n    classCallCheck(this, Downshift);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args)));\n\n    _initialiseProps.call(_this);\n\n    var state = _this.getState({\n      highlightedIndex: _this.props.defaultHighlightedIndex,\n      isOpen: _this.props.defaultIsOpen,\n      inputValue: _this.props.defaultInputValue,\n      selectedItem: _this.props.defaultSelectedItem\n    });\n\n    if (state.selectedItem != null) {\n      state.inputValue = _this.props.itemToString(state.selectedItem);\n    }\n\n    _this.state = state;\n    _this.id = _this.props.id || 'downshift-' + generateId();\n    return _this;\n  } // itemCount can be changed asynchronously\n  // from within downshift (so it can't come from a prop)\n  // this is why we store it as an instance and use\n  // getItemCount rather than just use items.length\n  // (to support windowing + async)\n\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n\n\n  Downshift.prototype.getState = function getState() {\n    var _this2 = this;\n\n    var stateToMerge = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state;\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this2.isControlledProp(key) ? _this2.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  };\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n\n\n  Downshift.prototype.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  Downshift.prototype.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n\n    /* eslint-disable no-negated-condition */\n    if (this.itemCount != null) {\n      return this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      return this.props.itemCount;\n    } else {\n      return this.items.length;\n    }\n    /* eslint-enable no-negated-condition */\n\n  };\n\n  Downshift.prototype.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  Downshift.prototype.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      scrollIntoView(node, this._rootNode);\n    }\n  };\n\n  Downshift.prototype.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    if (this.getState().isOpen) {\n      this.changeHighlightedIndex(amount, otherStateToSet);\n    } else {\n      this.setHighlightedIndex(undefined, _extends({\n        isOpen: true\n      }, otherStateToSet));\n    }\n  }; // eslint-disable-next-line complexity\n\n\n  Downshift.prototype.changeHighlightedIndex = function changeHighlightedIndex(moveAmount, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n\n    if (itemsLastIndex < 0) {\n      return;\n    }\n\n    var _getState = this.getState(),\n        highlightedIndex = _getState.highlightedIndex;\n\n    var baseIndex = highlightedIndex;\n\n    if (baseIndex === null) {\n      baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n    }\n\n    var newIndex = baseIndex + moveAmount;\n\n    if (newIndex < 0) {\n      newIndex = itemsLastIndex;\n    } else if (newIndex > itemsLastIndex) {\n      newIndex = 0;\n    }\n\n    this.setHighlightedIndex(newIndex, otherStateToSet);\n  }; // any piece of our state can live in two places:\n  // 1. Uncontrolled: it's internal (this.state)\n  //    We will call this.setState to update that state\n  // 2. Controlled: it's external (this.props)\n  //    We will call this.props.onStateChange to update that state\n  //\n  // In addition, we'll call this.props.onChange if the\n  // selectedItem is changed.\n\n\n  Downshift.prototype.getStateAndHelpers = function getStateAndHelpers() {\n    var _getState2 = this.getState(),\n        highlightedIndex = _getState2.highlightedIndex,\n        inputValue = _getState2.inputValue,\n        selectedItem = _getState2.selectedItem,\n        isOpen = _getState2.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getButtonProps = this.getButtonProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getButtonProps: getButtonProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n      //props\n      itemToString: itemToString,\n      //derived\n      id: id,\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  }; //////////////////////////// ROOT\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n  //////////////////////////// BUTTON\n  // TODO: remove this in 2.0.0 and just call it `getToggleButtonProps`\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n  /////////////////////////////// LABEL\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n  /////////////////////////////// INPUT\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n  /////////////////////////////// ITEM\n\n\n  Downshift.prototype.getItemId = function getItemId(index) {\n    return this.id + '-item-' + index;\n  }; //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n\n\n  Downshift.prototype.componentDidMount = function componentDidMount() {\n    var _this3 = this; // the _isMounted property is because we have `updateStatus` in a `debounce`\n    // and we don't want to update the status if the component has been umounted\n\n\n    this._isMounted = true;\n    /* istanbul ignore if (react-native) */\n\n    {\n      // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n      var onMouseDown = function () {\n        _this3.isMouseDown = true;\n      };\n\n      var onMouseUp = function (event) {\n        var document = _this3.props.environment.document;\n        _this3.isMouseDown = false;\n        var targetInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, event.target);\n        var activeElementInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, document.activeElement);\n\n        if (!targetInDownshift && !activeElementInDownshift && _this3.getState().isOpen) {\n          _this3.reset({\n            type: Downshift.stateChangeTypes.mouseUp\n          }, function () {\n            return _this3.props.onOuterClick(_this3.getStateAndHelpers());\n          });\n        }\n      }; // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n\n\n      var onTouchStart = function (event) {\n        var targetInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, event.target);\n\n        if (!targetInDownshift && _this3.getState().isOpen) {\n          _this3.reset({\n            type: Downshift.stateChangeTypes.touchStart\n          }, function () {\n            return _this3.props.onOuterClick(_this3.getStateAndHelpers());\n          });\n        }\n      };\n\n      this.props.environment.addEventListener('mousedown', onMouseDown);\n      this.props.environment.addEventListener('mouseup', onMouseUp);\n      this.props.environment.addEventListener('touchstart', onTouchStart);\n\n      this.cleanup = function () {\n        _this3._isMounted = false;\n\n        _this3.props.environment.removeEventListener('mousedown', onMouseDown);\n\n        _this3.props.environment.removeEventListener('mouseup', onMouseUp);\n\n        _this3.props.environment.removeEventListener('touchstart', onTouchStart);\n      };\n    }\n  };\n\n  Downshift.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: Downshift.stateChangeTypes.controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    var current = this.props.highlightedIndex === undefined ? this.state : this.props;\n    var prev = prevProps.highlightedIndex === undefined ? prevState : prevProps;\n\n    if (current.highlightedIndex !== prev.highlightedIndex && !this.avoidScrolling) {\n      this.scrollHighlightedItemIntoView();\n    }\n\n    this.updateStatus();\n  };\n\n  Downshift.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  }; // eslint-disable-next-line complexity\n\n\n  Downshift.prototype.render = function render() {\n    var children = unwrapArray(this.props.render || this.props.children, noop); // because the items are rerendered every time we call the children\n    // we clear this out each render and\n\n    this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n    this.getLabelProps.called = false; // and something similar for getInputProps\n\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n\n    if (!element) {\n      return null;\n    }\n\n    if (this.getRootProps.called) {\n      if (!this.getRootProps.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return React.cloneElement(element, this.getRootProps(getElementProps(element)));\n    } else {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must use apply the getRootProps function');\n    }\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultSelectedItem: null,\n  defaultInputValue: '',\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i)) {\n      //eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n\n    return String(i);\n  },\n  onStateChange: function onStateChange() {},\n  onInputValueChange: function onInputValueChange() {},\n  onUserAction: function onUserAction() {},\n  onChange: function onChange() {},\n  onSelect: function onSelect() {},\n  onOuterClick: function onOuterClick() {},\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  breakingChanges: {}\n};\nDownshift.stateChangeTypes = {\n  unknown: '__autocomplete_unknown__',\n  mouseUp: '__autocomplete_mouseup__',\n  itemMouseEnter: '__autocomplete_item_mouseenter__',\n  keyDownArrowUp: '__autocomplete_keydown_arrow_up__',\n  keyDownArrowDown: '__autocomplete_keydown_arrow_down__',\n  keyDownEscape: '__autocomplete_keydown_escape__',\n  keyDownEnter: '__autocomplete_keydown_enter__',\n  clickItem: '__autocomplete_click_item__',\n  blurInput: '__autocomplete_blur_input__',\n  changeInput: '__autocomplete_change_input__',\n  keyDownSpaceButton: '__autocomplete_keydown_space_button__',\n  clickButton: '__autocomplete_click_button__',\n  blurButton: '__autocomplete_blur_button__',\n  controlledPropUpdatedSelectedItem: '__autocomplete_controlled_prop_updated_selected_item__',\n  touchStart: '__autocomplete_touchstart__'\n};\n\nvar _initialiseProps = function () {\n  var _this4 = this;\n\n  this.input = null;\n  this.items = [];\n  this.itemCount = null;\n  this.previousResultCount = 0;\n\n  this.setItemCount = function (count) {\n    return _this4.itemCount = count;\n  };\n\n  this.unsetItemCount = function () {\n    return _this4.itemCount = null;\n  };\n\n  this.setHighlightedIndex = function () {\n    var highlightedIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.props.defaultHighlightedIndex;\n    var otherStateToSet = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    otherStateToSet = pickState(otherStateToSet);\n\n    _this4.internalSetState(_extends({\n      highlightedIndex: highlightedIndex\n    }, otherStateToSet));\n  };\n\n  this.clearSelection = function (cb) {\n    _this4.internalSetState({\n      selectedItem: null,\n      inputValue: '',\n      isOpen: false\n    }, cb);\n  };\n\n  this.selectItem = function (item, otherStateToSet, cb) {\n    otherStateToSet = pickState(otherStateToSet);\n\n    _this4.internalSetState(_extends({\n      isOpen: false,\n      highlightedIndex: _this4.props.defaultHighlightedIndex,\n      selectedItem: item,\n      inputValue: _this4.isControlledProp('selectedItem') && _this4.props.breakingChanges.resetInputOnSelection ? _this4.props.defaultInputValue : _this4.props.itemToString(item)\n    }, otherStateToSet), cb);\n  };\n\n  this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n    var item = _this4.items[itemIndex];\n\n    if (item == null) {\n      return;\n    }\n\n    _this4.selectItem(item, otherStateToSet, cb);\n  };\n\n  this.selectHighlightedItem = function (otherStateToSet, cb) {\n    return _this4.selectItemAtIndex(_this4.getState().highlightedIndex, otherStateToSet, cb);\n  };\n\n  this.internalSetState = function (stateToSet, cb) {\n    var isItemSelected = void 0,\n        onChangeArg = void 0;\n    var onStateChangeArg = {};\n    var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n    // so someone controlling the `inputValue` state gets notified of\n    // the input change as soon as possible. This avoids issues with\n    // preserving the cursor position.\n    // See https://github.com/paypal/downshift/issues/217 for more info.\n\n    if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n      _this4.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this4.getStateAndHelpers(), stateToSet));\n    }\n\n    return _this4.setState(function (state) {\n      state = _this4.getState(state);\n      var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n      newStateToSet = _this4.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n      // what was selected before\n      // used to determine if onSelect and onChange callbacks should be called\n\n      isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n      var nextState = {}; // this is just used to tell whether the state changed\n\n      var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n      // and we're trying to update that state. OR if the selection has changed and we're\n      // trying to update the selection\n\n      if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n        onChangeArg = newStateToSet.selectedItem;\n      }\n\n      newStateToSet.type = newStateToSet.type || Downshift.stateChangeTypes.unknown;\n      Object.keys(newStateToSet).forEach(function (key) {\n        // onStateChangeArg should only have the state that is\n        // actually changing\n        if (state[key] !== newStateToSet[key]) {\n          onStateChangeArg[key] = newStateToSet[key];\n        } // the type is useful for the onStateChangeArg\n        // but we don't actually want to set it in internal state.\n        // this is an undocumented feature for now... Not all internalSetState\n        // calls support it and I'm not certain we want them to yet.\n        // But it enables users controlling the isOpen state to know when\n        // the isOpen state changes due to mouseup events which is quite handy.\n\n\n        if (key === 'type') {\n          return;\n        }\n\n        nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n        if (!_this4.isControlledProp(key)) {\n          nextState[key] = newStateToSet[key];\n        }\n      }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n      // earlier, so we'll call it now that we know what the inputValue state will be.\n\n      if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n        _this4.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this4.getStateAndHelpers(), newStateToSet));\n      }\n\n      return nextState;\n    }, function () {\n      // call the provided callback if it's a callback\n      cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n      // we have relevant information to pass them.\n\n      var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n      if (hasMoreStateThanType) {\n        _this4.props.onStateChange(onStateChangeArg, _this4.getStateAndHelpers());\n      }\n\n      if (isItemSelected) {\n        _this4.props.onSelect(stateToSet.selectedItem, _this4.getStateAndHelpers());\n      }\n\n      if (onChangeArg !== undefined) {\n        _this4.props.onChange(onChangeArg, _this4.getStateAndHelpers());\n      } // this is currently undocumented and therefore subject to change\n      // We'll try to not break it, but just be warned.\n\n\n      _this4.props.onUserAction(onStateChangeArg, _this4.getStateAndHelpers());\n    });\n  };\n\n  this.rootRef = function (node) {\n    return _this4._rootNode = node;\n  };\n\n  this.getRootProps = function () {\n    var _babelHelpers$extends;\n\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref3$suppressRefErro = _ref3.suppressRefError,\n        suppressRefError = _ref3$suppressRefErro === undefined ? false : _ref3$suppressRefErro;\n\n    var _ref2$refKey = _ref2.refKey,\n        refKey = _ref2$refKey === undefined ? 'ref' : _ref2$refKey,\n        rest = objectWithoutProperties(_ref2, ['refKey']); // this is used in the render to know whether the user has called getRootProps.\n    // It uses that to know whether to apply the props automatically\n\n    _this4.getRootProps.called = true;\n    _this4.getRootProps.refKey = refKey;\n    _this4.getRootProps.suppressRefError = suppressRefError;\n    return _extends((_babelHelpers$extends = {}, _babelHelpers$extends[refKey] = _this4.rootRef, _babelHelpers$extends), rest);\n  };\n\n  this.keyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      var amount = event.shiftKey ? 5 : 1;\n      this.moveHighlightedIndex(amount, {\n        type: Downshift.stateChangeTypes.keyDownArrowDown\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      var amount = event.shiftKey ? -5 : -1;\n      this.moveHighlightedIndex(amount, {\n        type: Downshift.stateChangeTypes.keyDownArrowUp\n      });\n    },\n    Enter: function Enter(event) {\n      if (this.getState().isOpen) {\n        event.preventDefault();\n        var itemIndex = this.getState().highlightedIndex;\n        var item = this.items[itemIndex];\n        var itemNode = this.getItemNodeFromIndex(itemIndex);\n\n        if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n          return;\n        }\n\n        this.selectHighlightedItem({\n          type: Downshift.stateChangeTypes.keyDownEnter\n        });\n      }\n    },\n    Escape: function Escape(event) {\n      event.preventDefault();\n      this.reset({\n        type: Downshift.stateChangeTypes.keyDownEscape\n      });\n    }\n  };\n  this.buttonKeyDownHandlers = _extends({}, this.keyDownHandlers, {\n    ' ': function _(event) {\n      event.preventDefault();\n      this.toggleMenu({\n        type: Downshift.stateChangeTypes.keyDownSpaceButton\n      });\n    }\n  });\n\n  this.getToggleButtonProps = function () {\n    var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onClick = _ref4.onClick,\n        onKeyDown = _ref4.onKeyDown,\n        onBlur = _ref4.onBlur,\n        rest = objectWithoutProperties(_ref4, ['onClick', 'onKeyDown', 'onBlur']);\n\n    var _getState3 = _this4.getState(),\n        isOpen = _getState3.isOpen;\n\n    var enabledEventHandlers = {\n      onClick: composeEventHandlers(onClick, _this4.button_handleClick),\n      onKeyDown: composeEventHandlers(onKeyDown, _this4.button_handleKeyDown),\n      onBlur: composeEventHandlers(onBlur, _this4.button_handleBlur)\n    };\n    var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n    return _extends({\n      type: 'button',\n      role: 'button',\n      'aria-label': isOpen ? 'close menu' : 'open menu',\n      'aria-expanded': isOpen,\n      'aria-haspopup': true,\n      'data-toggle': true\n    }, eventHandlers, rest);\n  };\n\n  this.getButtonProps = this.getToggleButtonProps;\n\n  this.button_handleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (_this4.buttonKeyDownHandlers[key]) {\n      _this4.buttonKeyDownHandlers[key].call(_this4, event);\n    }\n  };\n\n  this.button_handleClick = function (event) {\n    event.preventDefault(); // handle odd case for Safari and Firefox which\n    // don't give the button the focus properly.\n\n    /* istanbul ignore if (can't reasonably test this) */\n\n    if (_this4.props.environment.document.activeElement === _this4.props.environment.document.body) {\n      event.target.focus();\n    } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n    // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n    // when building for production and should therefore have no impact on production code.\n\n\n    if (process.env.NODE_ENV === 'test') {\n      _this4.toggleMenu({\n        type: Downshift.stateChangeTypes.clickButton\n      });\n    } else {\n      // Ensure that toggle of menu occurs after the potential blur event in iOS\n      setTimeout(function () {\n        return _this4.toggleMenu({\n          type: Downshift.stateChangeTypes.clickButton\n        });\n      });\n    }\n  };\n\n  this.button_handleBlur = function (event) {\n    var blurTarget = event.target; // Save blur target for comparison with activeElement later\n    // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n    setTimeout(function () {\n      if (!_this4.isMouseDown && (_this4.props.environment.document.activeElement == null || _this4.props.environment.document.activeElement.id !== _this4.inputId) && _this4.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n      ) {\n          _this4.reset({\n            type: Downshift.stateChangeTypes.blurButton\n          });\n        }\n    });\n  };\n\n  this.getLabelProps = function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _this4.getLabelProps.called = true;\n\n    if (_this4.getInputProps.called && props.htmlFor && props.htmlFor !== _this4.inputId) {\n      throw new Error('downshift: You provided the htmlFor of \"' + props.htmlFor + '\" for your label, but the id of your input is \"' + _this4.inputId + '\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.');\n    }\n\n    _this4.inputId = firstDefined(_this4.inputId, props.htmlFor, _this4.id + '-input');\n    return _extends({}, props, {\n      htmlFor: _this4.inputId\n    });\n  };\n\n  this.getInputProps = function () {\n    var _ref6;\n\n    var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onKeyDown = _ref5.onKeyDown,\n        onBlur = _ref5.onBlur,\n        onChange = _ref5.onChange,\n        onInput = _ref5.onInput,\n        rest = objectWithoutProperties(_ref5, ['onKeyDown', 'onBlur', 'onChange', 'onInput']);\n    _this4.getInputProps.called = true;\n\n    if (_this4.getLabelProps.called && rest.id && rest.id !== _this4.inputId) {\n      throw new Error('downshift: You provided the id of \"' + rest.id + '\" for your input, but the htmlFor of your label is \"' + _this4.inputId + '\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.');\n    }\n\n    _this4.inputId = firstDefined(_this4.inputId, rest.id, _this4.id + '-input');\n    var onChangeKey = void 0;\n    /* istanbul ignore next (preact) */\n\n    onChangeKey = 'onChange';\n\n    var _getState4 = _this4.getState(),\n        inputValue = _getState4.inputValue,\n        isOpen = _getState4.isOpen,\n        highlightedIndex = _getState4.highlightedIndex;\n\n    var eventHandlers = rest.disabled ? {} : (_ref6 = {}, _ref6[onChangeKey] = composeEventHandlers(onChange, onInput, _this4.input_handleChange), _ref6.onKeyDown = composeEventHandlers(onKeyDown, _this4.input_handleKeyDown), _ref6.onBlur = composeEventHandlers(onBlur, _this4.input_handleBlur), _ref6);\n    return _extends({\n      role: 'combobox',\n      'aria-autocomplete': 'list',\n      'aria-expanded': isOpen,\n      'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this4.getItemId(highlightedIndex) : null,\n      autoComplete: 'off',\n      value: inputValue\n    }, eventHandlers, rest, {\n      id: _this4.inputId\n    });\n  };\n\n  this.input_handleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && _this4.keyDownHandlers[key]) {\n      _this4.keyDownHandlers[key].call(_this4, event);\n    }\n  };\n\n  this.input_handleChange = function (event) {\n    _this4.internalSetState({\n      type: Downshift.stateChangeTypes.changeInput,\n      isOpen: true,\n      inputValue: event.target.value\n    });\n  };\n\n  this.input_handleBlur = function () {\n    // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n    setTimeout(function () {\n      var downshiftButtonIsActive = _this4.props.environment.document.activeElement.dataset.toggle && _this4._rootNode && _this4._rootNode.contains(_this4.props.environment.document.activeElement);\n\n      if (!_this4.isMouseDown && !downshiftButtonIsActive) {\n        _this4.reset({\n          type: Downshift.stateChangeTypes.blurInput\n        });\n      }\n    });\n  };\n\n  this.getItemProps = function () {\n    var _enabledEventHandlers;\n\n    var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onMouseMove = _ref7.onMouseMove,\n        onMouseDown = _ref7.onMouseDown,\n        onClick = _ref7.onClick,\n        index = _ref7.index,\n        _ref7$item = _ref7.item,\n        item = _ref7$item === undefined ? requiredProp('getItemProps', 'item') : _ref7$item,\n        rest = objectWithoutProperties(_ref7, ['onMouseMove', 'onMouseDown', 'onClick', 'index', 'item']);\n\n    if (index === undefined) {\n      _this4.items.push(item);\n\n      index = _this4.items.indexOf(item);\n    } else {\n      _this4.items[index] = item;\n    }\n\n    var onSelectKey = 'onClick';\n    var enabledEventHandlers = (_enabledEventHandlers = {\n      // onMouseMove is used over onMouseEnter here. onMouseMove\n      // is only triggered on actual mouse movement while onMouseEnter\n      // can fire on DOM changes, interrupting keyboard navigation\n      onMouseMove: composeEventHandlers(onMouseMove, function () {\n        if (index === _this4.getState().highlightedIndex) {\n          return;\n        }\n\n        _this4.setHighlightedIndex(index, {\n          type: Downshift.stateChangeTypes.itemMouseEnter\n        }); // We never want to manually scroll when changing state based\n        // on `onMouseMove` because we will be moving the element out\n        // from under the user which is currently scrolling/moving the\n        // cursor\n\n\n        _this4.avoidScrolling = true;\n        setTimeout(function () {\n          return _this4.avoidScrolling = false;\n        }, 250);\n      }),\n      onMouseDown: composeEventHandlers(onMouseDown, function (event) {\n        // This prevents the activeElement from being changed\n        // to the item so it can remain with the current activeElement\n        // which is a more common use case.\n        event.preventDefault();\n      })\n    }, _enabledEventHandlers[onSelectKey] = composeEventHandlers(onClick, function () {\n      _this4.selectItemAtIndex(index, {\n        type: Downshift.stateChangeTypes.clickItem\n      });\n    }), _enabledEventHandlers);\n    var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n    return _extends({\n      id: _this4.getItemId(index)\n    }, eventHandlers, rest);\n  };\n\n  this.clearItems = function () {\n    _this4.items = [];\n  };\n\n  this.reset = function () {\n    var otherStateToSet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var cb = arguments[1];\n    otherStateToSet = pickState(otherStateToSet);\n\n    _this4.internalSetState(function (_ref8) {\n      var selectedItem = _ref8.selectedItem;\n      return _extends({\n        isOpen: false,\n        highlightedIndex: _this4.props.defaultHighlightedIndex,\n        inputValue: _this4.props.itemToString(selectedItem)\n      }, otherStateToSet);\n    }, cbToCb(cb));\n  };\n\n  this.toggleMenu = function () {\n    var otherStateToSet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var cb = arguments[1];\n    otherStateToSet = pickState(otherStateToSet);\n\n    _this4.internalSetState(function (_ref9) {\n      var isOpen = _ref9.isOpen;\n      return _extends({\n        isOpen: !isOpen\n      }, otherStateToSet);\n    }, function () {\n      var _getState5 = _this4.getState(),\n          isOpen = _getState5.isOpen;\n\n      if (isOpen) {\n        // highlight default index\n        _this4.setHighlightedIndex(undefined, otherStateToSet);\n      }\n\n      cbToCb(cb)();\n    });\n  };\n\n  this.openMenu = function (cb) {\n    _this4.internalSetState({\n      isOpen: true\n    }, cbToCb(cb));\n  };\n\n  this.closeMenu = function (cb) {\n    _this4.internalSetState({\n      isOpen: false\n    }, cbToCb(cb));\n  };\n\n  this.updateStatus = debounce(function () {\n    if (!_this4._isMounted) {\n      return;\n    }\n\n    var state = _this4.getState();\n\n    var item = _this4.items[state.highlightedIndex];\n\n    var resultCount = _this4.getItemCount();\n\n    var status = _this4.props.getA11yStatusMessage(_extends({\n      itemToString: _this4.props.itemToString,\n      previousResultCount: _this4.previousResultCount,\n      resultCount: resultCount,\n      highlightedItem: item\n    }, state));\n\n    _this4.previousResultCount = resultCount;\n    /* istanbul ignore else (react-native) */\n\n    setStatus(status);\n  }, 200);\n};\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  render: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultSelectedItem: PropTypes.any,\n  defaultInputValue: PropTypes.string,\n  defaultIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  breakingChanges: PropTypes.shape({\n    resetInputOnSelection: PropTypes.bool\n  })\n  /* eslint-enable */\n\n} : void 0;\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref) {\n  var refKey = _ref.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified) {\n    throw new Error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    throw new Error('downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \"' + refKey + '\"');\n  }\n\n  if (!getElementProps(element)[refKey]) {\n    throw new Error('downshift: You must apply the ref prop \"' + refKey + '\" from getRootProps onto your root element.');\n  }\n}\n/*\n * Fix importing in typescript after rollup compilation\n * https://github.com/rollup/rollup/issues/1156\n * https://github.com/Microsoft/TypeScript/issues/13017#issuecomment-268657860\n */\n\n\nDownshift.default = Downshift;\nDownshift.resetIdCounter = resetIdCounter;\nexport default Downshift;","map":{"version":3,"sources":["/Users/khadijaal-selini/call-for-code/policy-truth-frontend/node_modules/downshift/dist/downshift.esm.js"],"names":["React","Component","PropTypes","statusDiv","document","getElementById","statuses","setStatus","status","isSameAsLast","length","concat","div","getStatusDiv","lastChild","removeChild","firstChild","filter","Boolean","forEach","statusItem","index","appendChild","getStatusChildDiv","display","childDiv","createElement","style","textContent","setAttribute","Object","assign","border","clip","height","margin","overflow","padding","position","width","body","idCounter","cbToCb","cb","noop","findParent","finder","node","rootNode","parentNode","scrollTop","documentElement","getClosestScrollParent","bind","scrollHeight","clientHeight","scrollIntoView","scrollParent","scrollParentStyles","getComputedStyle","scrollParentRect","getBoundingClientRect","scrollParentBorderTopWidth","parseInt","borderTopWidth","scrollParentBorderBottomWidth","borderBottomWidth","bordersWidth","scrollParentTop","top","nodeRect","bottom","nodeOffsetTop","nodeTop","isOrContainsNode","parent","child","contains","debounce","fn","time","timeoutId","wrapper","_len","arguments","args","Array","_key","clearTimeout","setTimeout","apply","undefined","composeEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","preventDownshiftDefault","defaultPrevented","generateId","String","resetIdCounter","firstDefined","_len4","_key4","find","a","getA11yStatusMessage","_ref","isOpen","highlightedItem","selectedItem","resultCount","previousResultCount","itemToString","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","nodeName","type","getElementProps","props","attributes","requiredProp","fnName","propName","Error","stateKeys","pickState","state","result","k","hasOwnProperty","normalizeArrowKey","key","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","classCallCheck","instance","Constructor","TypeError","_extends","target","i","source","inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","objectWithoutProperties","keys","possibleConstructorReturn","self","ReferenceError","Downshift","_Component","_this","_initialiseProps","getState","highlightedIndex","defaultHighlightedIndex","defaultIsOpen","inputValue","defaultInputValue","defaultSelectedItem","id","_this2","stateToMerge","reduce","isControlledProp","getItemCount","itemCount","items","getItemNodeFromIndex","environment","getItemId","scrollHighlightedItemIntoView","_rootNode","moveHighlightedIndex","amount","otherStateToSet","changeHighlightedIndex","setHighlightedIndex","moveAmount","itemsLastIndex","_getState","baseIndex","newIndex","getStateAndHelpers","_getState2","getRootProps","getButtonProps","getToggleButtonProps","getLabelProps","getInputProps","getItemProps","openMenu","closeMenu","toggleMenu","selectItem","selectItemAtIndex","selectHighlightedItem","clearSelection","clearItems","reset","setItemCount","unsetItemCount","setState","internalSetState","componentDidMount","_this3","_isMounted","onMouseDown","isMouseDown","onMouseUp","targetInDownshift","activeElementInDownshift","activeElement","stateChangeTypes","mouseUp","onOuterClick","onTouchStart","touchStart","addEventListener","cleanup","removeEventListener","componentDidUpdate","prevProps","prevState","selectedItemChanged","controlledPropUpdatedSelectedItem","current","prev","avoidScrolling","updateStatus","componentWillUnmount","render","children","called","refKey","suppressRefError","validateGetRootPropsCalledCorrectly","cloneElement","defaultProps","process","env","NODE_ENV","console","warn","onStateChange","onInputValueChange","onUserAction","onChange","onSelect","prevItem","item","window","stateReducer","stateToSet","breakingChanges","unknown","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","_this4","input","count","resetInputOnSelection","itemIndex","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","newStateToSet","nextState","nextFullState","hasMoreStateThanType","rootRef","_babelHelpers$extends","_ref2","_ref3","_ref3$suppressRefErro","_ref2$refKey","rest","keyDownHandlers","ArrowDown","preventDefault","shiftKey","ArrowUp","Enter","itemNode","hasAttribute","Escape","buttonKeyDownHandlers","_","_ref4","onClick","onKeyDown","onBlur","_getState3","enabledEventHandlers","button_handleClick","button_handleKeyDown","button_handleBlur","eventHandlers","disabled","role","focus","blurTarget","inputId","htmlFor","_ref6","_ref5","onInput","onChangeKey","_getState4","input_handleChange","input_handleKeyDown","input_handleBlur","autoComplete","downshiftButtonIsActive","dataset","toggle","_enabledEventHandlers","_ref7","onMouseMove","_ref7$item","push","onSelectKey","_ref8","_ref9","_getState5","propTypes","func","number","any","string","bool","shape","refKeySpecified","isComposite","default"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// istanbul ignore next\nvar statusDiv = typeof document === 'undefined' ? null : document.getElementById('a11y-status-message');\n\nvar statuses = [];\n\nfunction setStatus(status) {\n  var isSameAsLast = statuses[statuses.length - 1] === status;\n  if (isSameAsLast) {\n    statuses = [].concat(statuses, [status]);\n  } else {\n    statuses = [status];\n  }\n  var div = getStatusDiv();\n\n  // Remove previous children\n  while (div.lastChild) {\n    div.removeChild(div.firstChild);\n  }\n\n  statuses.filter(Boolean).forEach(function (statusItem, index) {\n    div.appendChild(getStatusChildDiv(statusItem, index));\n  });\n}\n\nfunction getStatusChildDiv(status, index) {\n  var display = index === statuses.length - 1 ? 'block' : 'none';\n\n  var childDiv = document.createElement('div');\n  childDiv.style.display = display;\n  childDiv.textContent = status;\n\n  return childDiv;\n}\n\nfunction getStatusDiv() {\n  if (statusDiv) {\n    return statusDiv;\n  }\n  statusDiv = document.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'assertive');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  document.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar idCounter = 0;\n\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\nfunction noop() {}\n\nfunction findParent(finder, node, rootNode) {\n  if (node !== null && node !== rootNode.parentNode) {\n    if (finder(node)) {\n      if (node === document.body && node.scrollTop === 0) {\n        // in chrome body.scrollTop always return 0\n        return document.documentElement;\n      }\n      return node;\n    } else {\n      return findParent(finder, node.parentNode, rootNode);\n    }\n  } else {\n    return null;\n  }\n}\n\n/**\n * Get the closest element that scrolls\n * @param {HTMLElement} node - the child element to start searching for scroll parent at\n * @param {HTMLElement} rootNode - the root element of the component\n * @return {HTMLElement} the closest parentNode that scrolls\n */\nvar getClosestScrollParent = findParent.bind(null, function (node) {\n  return node.scrollHeight > node.clientHeight;\n});\n\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node - the element that should scroll into view\n * @param {HTMLElement} rootNode - the root element of the component\n * @param {Boolean} alignToTop - align element to the top of the visible area of the scrollable ancestor\n */\n// eslint-disable-next-line complexity\nfunction scrollIntoView(node, rootNode) {\n  var scrollParent = getClosestScrollParent(node, rootNode);\n  if (scrollParent === null) {\n    return;\n  }\n  var scrollParentStyles = getComputedStyle(scrollParent);\n  var scrollParentRect = scrollParent.getBoundingClientRect();\n  var scrollParentBorderTopWidth = parseInt(scrollParentStyles.borderTopWidth, 10);\n  var scrollParentBorderBottomWidth = parseInt(scrollParentStyles.borderBottomWidth, 10);\n  var bordersWidth = scrollParentBorderTopWidth + scrollParentBorderBottomWidth;\n  var scrollParentTop = scrollParentRect.top + scrollParentBorderTopWidth;\n  var nodeRect = node.getBoundingClientRect();\n\n  if (nodeRect.top < 0 && scrollParentRect.top < 0) {\n    scrollParent.scrollTop += nodeRect.top;\n    return;\n  }\n\n  if (nodeRect.top < 0) {\n    // the item is above the viewport and the parent is not above the viewport\n    scrollParent.scrollTop += nodeRect.top - scrollParentTop;\n    return;\n  }\n\n  if (nodeRect.top > 0 && scrollParentRect.top < 0) {\n    if (scrollParentRect.bottom > 0 && nodeRect.bottom + bordersWidth > scrollParentRect.bottom) {\n      // the item is below scrollable area\n      scrollParent.scrollTop += nodeRect.bottom - scrollParentRect.bottom + bordersWidth;\n    }\n    // item and parent top are on different sides of view top border (do nothing)\n    return;\n  }\n\n  var nodeOffsetTop = nodeRect.top + scrollParent.scrollTop;\n  var nodeTop = nodeOffsetTop - scrollParentTop;\n  if (nodeTop < scrollParent.scrollTop) {\n    // the item is above the scrollable area\n    scrollParent.scrollTop = nodeTop;\n  } else if (nodeTop + nodeRect.height + bordersWidth > scrollParent.scrollTop + scrollParentRect.height) {\n    // the item is below the scrollable area\n    scrollParent.scrollTop = nodeTop + nodeRect.height - scrollParentRect.height + bordersWidth;\n  }\n  // the item is within the scrollable area (do nothing)\n}\n\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains(child);\n}\n\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\nfunction debounce(fn, time) {\n  var timeoutId = void 0;\n  return wrapper;\n  function wrapper() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(undefined, args);\n    }, time);\n  }\n}\n\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\nfunction composeEventHandlers() {\n  for (var _len2 = arguments.length, fns = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      fn && fn.apply(undefined, [event].concat(args));\n      // TODO: remove everything after the || in the next breaking change\n      return event.preventDownshiftDefault || event.defaultPrevented;\n    });\n  };\n}\n\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\nfunction generateId() {\n  return String(idCounter++);\n}\n\n/**\n * Resets idCounter to 0. Used for SSR.\n */\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n\n/**\n * Returns the first argument that is not undefined\n * @param {...*} args the arguments\n * @return {*} the defined value\n */\nfunction firstDefined() {\n  for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    args[_key4] = arguments[_key4];\n  }\n\n  return args.find(function (a) {\n    return typeof a !== 'undefined';\n  });\n}\n\n// eslint-disable-next-line complexity\nfunction getA11yStatusMessage(_ref) {\n  var isOpen = _ref.isOpen,\n      highlightedItem = _ref.highlightedItem,\n      selectedItem = _ref.selectedItem,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount,\n      itemToString = _ref.itemToString;\n\n  if (!isOpen) {\n    if (selectedItem) {\n      return itemToString(selectedItem);\n    } else {\n      return '';\n    }\n  }\n\n  if (!resultCount) {\n    return 'No results.';\n  } else if (!highlightedItem || resultCount !== previousResultCount) {\n    return resultCount + ' ' + (resultCount === 1 ? 'result is' : 'results are') + ' available, use up and down arrow keys to navigate.';\n  }\n  return itemToString(highlightedItem);\n}\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ? /* istanbul ignore next (preact) */arg[0] : arg;\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\nfunction isDOMElement(element) {\n  /* istanbul ignore if */\n  if (element.nodeName) {\n    // then this is preact\n    return typeof element.nodeName === 'string';\n  } else {\n    // then we assume this is react\n    return typeof element.type === 'string';\n  }\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\nfunction getElementProps(element) {\n  // props for react, attributes for preact\n  return element.props || /* istanbul ignore next (preact) */element.attributes;\n}\n\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\nfunction requiredProp(fnName, propName) {\n  throw new Error('The property \"' + propName + '\" is required in \"' + fnName + '\"');\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state The state object\n * @return {Object} State that is relevant to downshift\n */\nfunction pickState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a KeyboardEvent object\n * @return {String} keyboard key\n */\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return 'Arrow' + key;\n  }\n  return key;\n}\n\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/* eslint camelcase:0 */\n\nvar Downshift = function (_Component) {\n  inherits(Downshift, _Component);\n\n  function Downshift() {\n    classCallCheck(this, Downshift);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args)));\n\n    _initialiseProps.call(_this);\n\n    var state = _this.getState({\n      highlightedIndex: _this.props.defaultHighlightedIndex,\n      isOpen: _this.props.defaultIsOpen,\n      inputValue: _this.props.defaultInputValue,\n      selectedItem: _this.props.defaultSelectedItem\n    });\n    if (state.selectedItem != null) {\n      state.inputValue = _this.props.itemToString(state.selectedItem);\n    }\n    _this.state = state;\n    _this.id = _this.props.id || 'downshift-' + generateId();\n    return _this;\n  }\n  // itemCount can be changed asynchronously\n  // from within downshift (so it can't come from a prop)\n  // this is why we store it as an instance and use\n  // getItemCount rather than just use items.length\n  // (to support windowing + async)\n\n\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n  Downshift.prototype.getState = function getState() {\n    var _this2 = this;\n\n    var stateToMerge = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state;\n\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this2.isControlledProp(key) ? _this2.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  };\n\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n\n\n  Downshift.prototype.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  Downshift.prototype.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n    /* eslint-disable no-negated-condition */\n    if (this.itemCount != null) {\n      return this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      return this.props.itemCount;\n    } else {\n      return this.items.length;\n    }\n    /* eslint-enable no-negated-condition */\n  };\n\n  Downshift.prototype.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  Downshift.prototype.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      scrollIntoView(node, this._rootNode);\n    }\n  };\n\n  Downshift.prototype.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    if (this.getState().isOpen) {\n      this.changeHighlightedIndex(amount, otherStateToSet);\n    } else {\n      this.setHighlightedIndex(undefined, _extends({ isOpen: true }, otherStateToSet));\n    }\n  };\n\n  // eslint-disable-next-line complexity\n\n\n  Downshift.prototype.changeHighlightedIndex = function changeHighlightedIndex(moveAmount, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n    if (itemsLastIndex < 0) {\n      return;\n    }\n\n    var _getState = this.getState(),\n        highlightedIndex = _getState.highlightedIndex;\n\n    var baseIndex = highlightedIndex;\n    if (baseIndex === null) {\n      baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n    }\n    var newIndex = baseIndex + moveAmount;\n    if (newIndex < 0) {\n      newIndex = itemsLastIndex;\n    } else if (newIndex > itemsLastIndex) {\n      newIndex = 0;\n    }\n    this.setHighlightedIndex(newIndex, otherStateToSet);\n  };\n\n  // any piece of our state can live in two places:\n  // 1. Uncontrolled: it's internal (this.state)\n  //    We will call this.setState to update that state\n  // 2. Controlled: it's external (this.props)\n  //    We will call this.props.onStateChange to update that state\n  //\n  // In addition, we'll call this.props.onChange if the\n  // selectedItem is changed.\n\n\n  Downshift.prototype.getStateAndHelpers = function getStateAndHelpers() {\n    var _getState2 = this.getState(),\n        highlightedIndex = _getState2.highlightedIndex,\n        inputValue = _getState2.inputValue,\n        selectedItem = _getState2.selectedItem,\n        isOpen = _getState2.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getButtonProps = this.getButtonProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getButtonProps: getButtonProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n\n      //props\n      itemToString: itemToString,\n\n      //derived\n      id: id,\n\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  };\n\n  //////////////////////////// ROOT\n\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n\n  //////////////////////////// BUTTON\n\n  // TODO: remove this in 2.0.0 and just call it `getToggleButtonProps`\n\n\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n\n  /////////////////////////////// LABEL\n\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n\n  /////////////////////////////// INPUT\n\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n\n  /////////////////////////////// ITEM\n  Downshift.prototype.getItemId = function getItemId(index) {\n    return this.id + '-item-' + index;\n  };\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n\n  Downshift.prototype.componentDidMount = function componentDidMount() {\n    var _this3 = this;\n\n    // the _isMounted property is because we have `updateStatus` in a `debounce`\n    // and we don't want to update the status if the component has been umounted\n    this._isMounted = true;\n    /* istanbul ignore if (react-native) */\n    {\n      // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n      var onMouseDown = function () {\n        _this3.isMouseDown = true;\n      };\n      var onMouseUp = function (event) {\n        var document = _this3.props.environment.document;\n\n        _this3.isMouseDown = false;\n        var targetInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, event.target);\n        var activeElementInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, document.activeElement);\n        if (!targetInDownshift && !activeElementInDownshift && _this3.getState().isOpen) {\n          _this3.reset({ type: Downshift.stateChangeTypes.mouseUp }, function () {\n            return _this3.props.onOuterClick(_this3.getStateAndHelpers());\n          });\n        }\n      };\n      // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n      var onTouchStart = function (event) {\n        var targetInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, event.target);\n        if (!targetInDownshift && _this3.getState().isOpen) {\n          _this3.reset({ type: Downshift.stateChangeTypes.touchStart }, function () {\n            return _this3.props.onOuterClick(_this3.getStateAndHelpers());\n          });\n        }\n      };\n\n      this.props.environment.addEventListener('mousedown', onMouseDown);\n      this.props.environment.addEventListener('mouseup', onMouseUp);\n      this.props.environment.addEventListener('touchstart', onTouchStart);\n\n      this.cleanup = function () {\n        _this3._isMounted = false;\n        _this3.props.environment.removeEventListener('mousedown', onMouseDown);\n        _this3.props.environment.removeEventListener('mouseup', onMouseUp);\n        _this3.props.environment.removeEventListener('touchstart', onTouchStart);\n      };\n    }\n  };\n\n  Downshift.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: Downshift.stateChangeTypes.controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    var current = this.props.highlightedIndex === undefined ? this.state : this.props;\n    var prev = prevProps.highlightedIndex === undefined ? prevState : prevProps;\n\n    if (current.highlightedIndex !== prev.highlightedIndex && !this.avoidScrolling) {\n      this.scrollHighlightedItemIntoView();\n    }\n\n    this.updateStatus();\n  };\n\n  Downshift.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  };\n\n  // eslint-disable-next-line complexity\n\n\n  Downshift.prototype.render = function render() {\n    var children = unwrapArray(this.props.render || this.props.children, noop);\n    // because the items are rerendered every time we call the children\n    // we clear this out each render and\n    this.clearItems();\n    // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined;\n    // we do something similar for getLabelProps\n    this.getLabelProps.called = false;\n    // and something similar for getInputProps\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n    if (!element) {\n      return null;\n    }\n    if (this.getRootProps.called) {\n      if (!this.getRootProps.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return React.cloneElement(element, this.getRootProps(getElementProps(element)));\n    } else {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must use apply the getRootProps function');\n    }\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultSelectedItem: null,\n  defaultInputValue: '',\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i)) {\n      //eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n    return String(i);\n  },\n  onStateChange: function onStateChange() {},\n  onInputValueChange: function onInputValueChange() {},\n  onUserAction: function onUserAction() {},\n  onChange: function onChange() {},\n  onSelect: function onSelect() {},\n  onOuterClick: function onOuterClick() {},\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined' /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  breakingChanges: {}\n};\nDownshift.stateChangeTypes = {\n  unknown: '__autocomplete_unknown__',\n  mouseUp: '__autocomplete_mouseup__',\n  itemMouseEnter: '__autocomplete_item_mouseenter__',\n  keyDownArrowUp: '__autocomplete_keydown_arrow_up__',\n  keyDownArrowDown: '__autocomplete_keydown_arrow_down__',\n  keyDownEscape: '__autocomplete_keydown_escape__',\n  keyDownEnter: '__autocomplete_keydown_enter__',\n  clickItem: '__autocomplete_click_item__',\n  blurInput: '__autocomplete_blur_input__',\n  changeInput: '__autocomplete_change_input__',\n  keyDownSpaceButton: '__autocomplete_keydown_space_button__',\n  clickButton: '__autocomplete_click_button__',\n  blurButton: '__autocomplete_blur_button__',\n  controlledPropUpdatedSelectedItem: '__autocomplete_controlled_prop_updated_selected_item__',\n  touchStart: '__autocomplete_touchstart__'\n};\n\nvar _initialiseProps = function () {\n  var _this4 = this;\n\n  this.input = null;\n  this.items = [];\n  this.itemCount = null;\n  this.previousResultCount = 0;\n\n  this.setItemCount = function (count) {\n    return _this4.itemCount = count;\n  };\n\n  this.unsetItemCount = function () {\n    return _this4.itemCount = null;\n  };\n\n  this.setHighlightedIndex = function () {\n    var highlightedIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.props.defaultHighlightedIndex;\n    var otherStateToSet = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    otherStateToSet = pickState(otherStateToSet);\n    _this4.internalSetState(_extends({ highlightedIndex: highlightedIndex }, otherStateToSet));\n  };\n\n  this.clearSelection = function (cb) {\n    _this4.internalSetState({\n      selectedItem: null,\n      inputValue: '',\n      isOpen: false\n    }, cb);\n  };\n\n  this.selectItem = function (item, otherStateToSet, cb) {\n    otherStateToSet = pickState(otherStateToSet);\n    _this4.internalSetState(_extends({\n      isOpen: false,\n      highlightedIndex: _this4.props.defaultHighlightedIndex,\n      selectedItem: item,\n      inputValue: _this4.isControlledProp('selectedItem') && _this4.props.breakingChanges.resetInputOnSelection ? _this4.props.defaultInputValue : _this4.props.itemToString(item)\n    }, otherStateToSet), cb);\n  };\n\n  this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n    var item = _this4.items[itemIndex];\n    if (item == null) {\n      return;\n    }\n    _this4.selectItem(item, otherStateToSet, cb);\n  };\n\n  this.selectHighlightedItem = function (otherStateToSet, cb) {\n    return _this4.selectItemAtIndex(_this4.getState().highlightedIndex, otherStateToSet, cb);\n  };\n\n  this.internalSetState = function (stateToSet, cb) {\n    var isItemSelected = void 0,\n        onChangeArg = void 0;\n\n    var onStateChangeArg = {};\n    var isStateToSetFunction = typeof stateToSet === 'function';\n\n    // we want to call `onInputValueChange` before the `setState` call\n    // so someone controlling the `inputValue` state gets notified of\n    // the input change as soon as possible. This avoids issues with\n    // preserving the cursor position.\n    // See https://github.com/paypal/downshift/issues/217 for more info.\n    if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n      _this4.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this4.getStateAndHelpers(), stateToSet));\n    }\n    return _this4.setState(function (state) {\n      state = _this4.getState(state);\n      var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet;\n\n      // Your own function that could modify the state that will be set.\n      newStateToSet = _this4.props.stateReducer(state, newStateToSet);\n\n      // checks if an item is selected, regardless of if it's different from\n      // what was selected before\n      // used to determine if onSelect and onChange callbacks should be called\n      isItemSelected = newStateToSet.hasOwnProperty('selectedItem');\n      // this keeps track of the object we want to call with setState\n      var nextState = {};\n      // this is just used to tell whether the state changed\n      var nextFullState = {};\n      // we need to call on change if the outside world is controlling any of our state\n      // and we're trying to update that state. OR if the selection has changed and we're\n      // trying to update the selection\n      if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n        onChangeArg = newStateToSet.selectedItem;\n      }\n      newStateToSet.type = newStateToSet.type || Downshift.stateChangeTypes.unknown;\n\n      Object.keys(newStateToSet).forEach(function (key) {\n        // onStateChangeArg should only have the state that is\n        // actually changing\n        if (state[key] !== newStateToSet[key]) {\n          onStateChangeArg[key] = newStateToSet[key];\n        }\n        // the type is useful for the onStateChangeArg\n        // but we don't actually want to set it in internal state.\n        // this is an undocumented feature for now... Not all internalSetState\n        // calls support it and I'm not certain we want them to yet.\n        // But it enables users controlling the isOpen state to know when\n        // the isOpen state changes due to mouseup events which is quite handy.\n        if (key === 'type') {\n          return;\n        }\n        nextFullState[key] = newStateToSet[key];\n        // if it's coming from props, then we don't care to set it internally\n        if (!_this4.isControlledProp(key)) {\n          nextState[key] = newStateToSet[key];\n        }\n      });\n\n      // if stateToSet is a function, then we weren't able to call onInputValueChange\n      // earlier, so we'll call it now that we know what the inputValue state will be.\n      if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n        _this4.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this4.getStateAndHelpers(), newStateToSet));\n      }\n\n      return nextState;\n    }, function () {\n      // call the provided callback if it's a callback\n      cbToCb(cb)();\n\n      // only call the onStateChange and onChange callbacks if\n      // we have relevant information to pass them.\n      var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n      if (hasMoreStateThanType) {\n        _this4.props.onStateChange(onStateChangeArg, _this4.getStateAndHelpers());\n      }\n\n      if (isItemSelected) {\n        _this4.props.onSelect(stateToSet.selectedItem, _this4.getStateAndHelpers());\n      }\n\n      if (onChangeArg !== undefined) {\n        _this4.props.onChange(onChangeArg, _this4.getStateAndHelpers());\n      }\n      // this is currently undocumented and therefore subject to change\n      // We'll try to not break it, but just be warned.\n      _this4.props.onUserAction(onStateChangeArg, _this4.getStateAndHelpers());\n    });\n  };\n\n  this.rootRef = function (node) {\n    return _this4._rootNode = node;\n  };\n\n  this.getRootProps = function () {\n    var _babelHelpers$extends;\n\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref3$suppressRefErro = _ref3.suppressRefError,\n        suppressRefError = _ref3$suppressRefErro === undefined ? false : _ref3$suppressRefErro;\n\n    var _ref2$refKey = _ref2.refKey,\n        refKey = _ref2$refKey === undefined ? 'ref' : _ref2$refKey,\n        rest = objectWithoutProperties(_ref2, ['refKey']);\n\n    // this is used in the render to know whether the user has called getRootProps.\n    // It uses that to know whether to apply the props automatically\n    _this4.getRootProps.called = true;\n    _this4.getRootProps.refKey = refKey;\n    _this4.getRootProps.suppressRefError = suppressRefError;\n    return _extends((_babelHelpers$extends = {}, _babelHelpers$extends[refKey] = _this4.rootRef, _babelHelpers$extends), rest);\n  };\n\n  this.keyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      var amount = event.shiftKey ? 5 : 1;\n      this.moveHighlightedIndex(amount, {\n        type: Downshift.stateChangeTypes.keyDownArrowDown\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      var amount = event.shiftKey ? -5 : -1;\n      this.moveHighlightedIndex(amount, {\n        type: Downshift.stateChangeTypes.keyDownArrowUp\n      });\n    },\n    Enter: function Enter(event) {\n      if (this.getState().isOpen) {\n        event.preventDefault();\n        var itemIndex = this.getState().highlightedIndex;\n        var item = this.items[itemIndex];\n        var itemNode = this.getItemNodeFromIndex(itemIndex);\n        if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n          return;\n        }\n        this.selectHighlightedItem({\n          type: Downshift.stateChangeTypes.keyDownEnter\n        });\n      }\n    },\n    Escape: function Escape(event) {\n      event.preventDefault();\n      this.reset({ type: Downshift.stateChangeTypes.keyDownEscape });\n    }\n  };\n  this.buttonKeyDownHandlers = _extends({}, this.keyDownHandlers, {\n    ' ': function _(event) {\n      event.preventDefault();\n      this.toggleMenu({ type: Downshift.stateChangeTypes.keyDownSpaceButton });\n    }\n  });\n\n  this.getToggleButtonProps = function () {\n    var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onClick = _ref4.onClick,\n        onKeyDown = _ref4.onKeyDown,\n        onBlur = _ref4.onBlur,\n        rest = objectWithoutProperties(_ref4, ['onClick', 'onKeyDown', 'onBlur']);\n\n    var _getState3 = _this4.getState(),\n        isOpen = _getState3.isOpen;\n\n    var enabledEventHandlers = {\n      onClick: composeEventHandlers(onClick, _this4.button_handleClick),\n      onKeyDown: composeEventHandlers(onKeyDown, _this4.button_handleKeyDown),\n      onBlur: composeEventHandlers(onBlur, _this4.button_handleBlur)\n    };\n    var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n    return _extends({\n      type: 'button',\n      role: 'button',\n      'aria-label': isOpen ? 'close menu' : 'open menu',\n      'aria-expanded': isOpen,\n      'aria-haspopup': true,\n      'data-toggle': true\n    }, eventHandlers, rest);\n  };\n\n  this.getButtonProps = this.getToggleButtonProps;\n\n  this.button_handleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n    if (_this4.buttonKeyDownHandlers[key]) {\n      _this4.buttonKeyDownHandlers[key].call(_this4, event);\n    }\n  };\n\n  this.button_handleClick = function (event) {\n    event.preventDefault();\n    // handle odd case for Safari and Firefox which\n    // don't give the button the focus properly.\n    /* istanbul ignore if (can't reasonably test this) */\n    if (_this4.props.environment.document.activeElement === _this4.props.environment.document.body) {\n      event.target.focus();\n    }\n    // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n    // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n    // when building for production and should therefore have no impact on production code.\n    if (process.env.NODE_ENV === 'test') {\n      _this4.toggleMenu({ type: Downshift.stateChangeTypes.clickButton });\n    } else {\n      // Ensure that toggle of menu occurs after the potential blur event in iOS\n      setTimeout(function () {\n        return _this4.toggleMenu({ type: Downshift.stateChangeTypes.clickButton });\n      });\n    }\n  };\n\n  this.button_handleBlur = function (event) {\n    var blurTarget = event.target; // Save blur target for comparison with activeElement later\n    // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n    setTimeout(function () {\n      if (!_this4.isMouseDown && (_this4.props.environment.document.activeElement == null || _this4.props.environment.document.activeElement.id !== _this4.inputId) && _this4.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n      ) {\n          _this4.reset({ type: Downshift.stateChangeTypes.blurButton });\n        }\n    });\n  };\n\n  this.getLabelProps = function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _this4.getLabelProps.called = true;\n    if (_this4.getInputProps.called && props.htmlFor && props.htmlFor !== _this4.inputId) {\n      throw new Error('downshift: You provided the htmlFor of \"' + props.htmlFor + '\" for your label, but the id of your input is \"' + _this4.inputId + '\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.');\n    }\n    _this4.inputId = firstDefined(_this4.inputId, props.htmlFor, _this4.id + '-input');\n    return _extends({}, props, {\n      htmlFor: _this4.inputId\n    });\n  };\n\n  this.getInputProps = function () {\n    var _ref6;\n\n    var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onKeyDown = _ref5.onKeyDown,\n        onBlur = _ref5.onBlur,\n        onChange = _ref5.onChange,\n        onInput = _ref5.onInput,\n        rest = objectWithoutProperties(_ref5, ['onKeyDown', 'onBlur', 'onChange', 'onInput']);\n\n    _this4.getInputProps.called = true;\n    if (_this4.getLabelProps.called && rest.id && rest.id !== _this4.inputId) {\n      throw new Error('downshift: You provided the id of \"' + rest.id + '\" for your input, but the htmlFor of your label is \"' + _this4.inputId + '\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.');\n    }\n    _this4.inputId = firstDefined(_this4.inputId, rest.id, _this4.id + '-input');\n    var onChangeKey = void 0;\n    /* istanbul ignore next (preact) */\n    onChangeKey = 'onChange';\n\n    var _getState4 = _this4.getState(),\n        inputValue = _getState4.inputValue,\n        isOpen = _getState4.isOpen,\n        highlightedIndex = _getState4.highlightedIndex;\n\n    var eventHandlers = rest.disabled ? {} : (_ref6 = {}, _ref6[onChangeKey] = composeEventHandlers(onChange, onInput, _this4.input_handleChange), _ref6.onKeyDown = composeEventHandlers(onKeyDown, _this4.input_handleKeyDown), _ref6.onBlur = composeEventHandlers(onBlur, _this4.input_handleBlur), _ref6);\n    return _extends({\n      role: 'combobox',\n      'aria-autocomplete': 'list',\n      'aria-expanded': isOpen,\n      'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this4.getItemId(highlightedIndex) : null,\n      autoComplete: 'off',\n      value: inputValue\n    }, eventHandlers, rest, {\n      id: _this4.inputId\n    });\n  };\n\n  this.input_handleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n    if (key && _this4.keyDownHandlers[key]) {\n      _this4.keyDownHandlers[key].call(_this4, event);\n    }\n  };\n\n  this.input_handleChange = function (event) {\n    _this4.internalSetState({\n      type: Downshift.stateChangeTypes.changeInput,\n      isOpen: true,\n      inputValue: event.target.value\n    });\n  };\n\n  this.input_handleBlur = function () {\n    // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n    setTimeout(function () {\n      var downshiftButtonIsActive = _this4.props.environment.document.activeElement.dataset.toggle && _this4._rootNode && _this4._rootNode.contains(_this4.props.environment.document.activeElement);\n      if (!_this4.isMouseDown && !downshiftButtonIsActive) {\n        _this4.reset({ type: Downshift.stateChangeTypes.blurInput });\n      }\n    });\n  };\n\n  this.getItemProps = function () {\n    var _enabledEventHandlers;\n\n    var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onMouseMove = _ref7.onMouseMove,\n        onMouseDown = _ref7.onMouseDown,\n        onClick = _ref7.onClick,\n        index = _ref7.index,\n        _ref7$item = _ref7.item,\n        item = _ref7$item === undefined ? requiredProp('getItemProps', 'item') : _ref7$item,\n        rest = objectWithoutProperties(_ref7, ['onMouseMove', 'onMouseDown', 'onClick', 'index', 'item']);\n\n    if (index === undefined) {\n      _this4.items.push(item);\n      index = _this4.items.indexOf(item);\n    } else {\n      _this4.items[index] = item;\n    }\n\n    var onSelectKey = 'onClick';\n\n    var enabledEventHandlers = (_enabledEventHandlers = {\n      // onMouseMove is used over onMouseEnter here. onMouseMove\n      // is only triggered on actual mouse movement while onMouseEnter\n      // can fire on DOM changes, interrupting keyboard navigation\n      onMouseMove: composeEventHandlers(onMouseMove, function () {\n        if (index === _this4.getState().highlightedIndex) {\n          return;\n        }\n        _this4.setHighlightedIndex(index, {\n          type: Downshift.stateChangeTypes.itemMouseEnter\n        });\n\n        // We never want to manually scroll when changing state based\n        // on `onMouseMove` because we will be moving the element out\n        // from under the user which is currently scrolling/moving the\n        // cursor\n        _this4.avoidScrolling = true;\n        setTimeout(function () {\n          return _this4.avoidScrolling = false;\n        }, 250);\n      }),\n      onMouseDown: composeEventHandlers(onMouseDown, function (event) {\n        // This prevents the activeElement from being changed\n        // to the item so it can remain with the current activeElement\n        // which is a more common use case.\n        event.preventDefault();\n      })\n    }, _enabledEventHandlers[onSelectKey] = composeEventHandlers(onClick, function () {\n      _this4.selectItemAtIndex(index, {\n        type: Downshift.stateChangeTypes.clickItem\n      });\n    }), _enabledEventHandlers);\n\n    var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n\n    return _extends({\n      id: _this4.getItemId(index)\n    }, eventHandlers, rest);\n  };\n\n  this.clearItems = function () {\n    _this4.items = [];\n  };\n\n  this.reset = function () {\n    var otherStateToSet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var cb = arguments[1];\n\n    otherStateToSet = pickState(otherStateToSet);\n    _this4.internalSetState(function (_ref8) {\n      var selectedItem = _ref8.selectedItem;\n      return _extends({\n        isOpen: false,\n        highlightedIndex: _this4.props.defaultHighlightedIndex,\n        inputValue: _this4.props.itemToString(selectedItem)\n      }, otherStateToSet);\n    }, cbToCb(cb));\n  };\n\n  this.toggleMenu = function () {\n    var otherStateToSet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var cb = arguments[1];\n\n    otherStateToSet = pickState(otherStateToSet);\n    _this4.internalSetState(function (_ref9) {\n      var isOpen = _ref9.isOpen;\n\n      return _extends({ isOpen: !isOpen }, otherStateToSet);\n    }, function () {\n      var _getState5 = _this4.getState(),\n          isOpen = _getState5.isOpen;\n\n      if (isOpen) {\n        // highlight default index\n        _this4.setHighlightedIndex(undefined, otherStateToSet);\n      }\n      cbToCb(cb)();\n    });\n  };\n\n  this.openMenu = function (cb) {\n    _this4.internalSetState({ isOpen: true }, cbToCb(cb));\n  };\n\n  this.closeMenu = function (cb) {\n    _this4.internalSetState({ isOpen: false }, cbToCb(cb));\n  };\n\n  this.updateStatus = debounce(function () {\n    if (!_this4._isMounted) {\n      return;\n    }\n    var state = _this4.getState();\n    var item = _this4.items[state.highlightedIndex];\n    var resultCount = _this4.getItemCount();\n    var status = _this4.props.getA11yStatusMessage(_extends({\n      itemToString: _this4.props.itemToString,\n      previousResultCount: _this4.previousResultCount,\n      resultCount: resultCount,\n      highlightedItem: item\n    }, state));\n    _this4.previousResultCount = resultCount;\n    /* istanbul ignore else (react-native) */\n    setStatus(status);\n  }, 200);\n};\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  render: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultSelectedItem: PropTypes.any,\n  defaultInputValue: PropTypes.string,\n  defaultIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  breakingChanges: PropTypes.shape({\n    resetInputOnSelection: PropTypes.bool\n  })\n  /* eslint-enable */\n} : void 0;\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref) {\n  var refKey = _ref.refKey;\n\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n  if (isComposite && !refKeySpecified) {\n    throw new Error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    throw new Error('downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \"' + refKey + '\"');\n  }\n  if (!getElementProps(element)[refKey]) {\n    throw new Error('downshift: You must apply the ref prop \"' + refKey + '\" from getRootProps onto your root element.');\n  }\n}\n\n/*\n * Fix importing in typescript after rollup compilation\n * https://github.com/rollup/rollup/issues/1156\n * https://github.com/Microsoft/TypeScript/issues/13017#issuecomment-268657860\n */\nDownshift.default = Downshift;\nDownshift.resetIdCounter = resetIdCounter;\n\nexport default Downshift;\n"]},"metadata":{},"sourceType":"module"}