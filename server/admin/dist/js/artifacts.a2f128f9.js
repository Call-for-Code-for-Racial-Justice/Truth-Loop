(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["artifacts"],{"950d":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",{staticClass:"bx--content"},[i("v-card",{staticClass:"maincard"},[i("v-card-title",[e._v(" All Artifacts "),i("v-spacer"),i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),i("v-data-table",{staticClass:"elevation-4",attrs:{"fixed-header":"",height:"60vh",headers:e.headers,items:this.items,"item-key":"id","sort-by":["date_introduced"],"sort-desc":[!0],search:e.search,"show-expand":"",dense:""},scopedSlots:e._u([{key:"top",fn:function(){return[i("v-dialog",{model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[i("v-card",[i("v-card-title",[i("h2",[e._v("Edit Artifact #"+e._s(e.editedItem.id))])]),i("cv-form",{on:{submit:function(t){return t.preventDefault(),e.addArtifact(t)}}},[i("cv-text-input",{attrs:{label:"Title",placeholder:"Enter the title of the artifact"},model:{value:e.editedItem.title,callback:function(t){e.$set(e.editedItem,"title",t)},expression:"editedItem.title"}},[e._v(' invalid-message="" '),e.showInvalid.title?i("template",{slot:"invalid-message"},[e._v(" Required field ")]):e._e()],2),i("cv-text-input",{attrs:{label:"URL",placeholder:"Provide a link to the full text of the artifact"},model:{value:e.editedItem.link_to_full_text,callback:function(t){e.$set(e.editedItem,"link_to_full_text",t)},expression:"editedItem.link_to_full_text"}},[e._v(" >")]),i("cv-text-area",{attrs:{label:"Summary",placeholder:"Provide your own summary of the artifact"},model:{value:e.editedItem.summary,callback:function(t){e.$set(e.editedItem,"summary",t)},expression:"editedItem.summary"}},[e._v(' invalid-message="" '),e.showInvalid.summary?i("template",{slot:"invalid-message"},[e._v(" Required field ")]):e._e(),e._v(" >")],2),i("cv-select",{attrs:{label:"Status",placeholder:"Choose an option"},model:{value:e.editedItem.status,callback:function(t){e.$set(e.editedItem,"status",t)},expression:"editedItem.status"}},[i("cv-select-option",{attrs:{disabled:"",selected:""}},[e._v("Choose an option")]),i("cv-select-option",[e._v("Introduced")]),i("cv-select-option",[e._v("Referred")]),i("cv-select-option",[e._v("Reported")]),i("cv-select-option",[e._v("Failed")]),i("cv-select-option",[e._v("Passed")]),i("cv-select-option",[e._v("Enacted")]),i("cv-select-option",[e._v("Vetoed")])],1),i("cv-date-picker",{attrs:{"date-label":"Date introduced",kind:"single"},model:{value:e.editedItem.date_introduced,callback:function(t){e.$set(e.editedItem,"date_introduced",t)},expression:"editedItem.date_introduced"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.cancel}},[e._v(" Cancel ")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),i("v-dialog",{attrs:{"max-width":"85%"},model:{value:e.dialogVectors,callback:function(t){e.dialogVectors=t},expression:"dialogVectors"}},[i("v-card",[i("v-card-title",[i("h2",[e._v("Edit Artifact #"+e._s(e.editedItem.id)+" Vectors")])]),i("v-card-subtitle",[e._v(" Title: "+e._s(e.editedItem.title)+" ")]),i("v-card",[i("v-card-subtitle",[i("h4",[e._v("Advocacy Groups")])]),i("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.advocacyGroupsHeaders,items:e.editedItem.advocacy_groups,"item-key":"id","sort-by":["name"]},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItemFrom(a,e.editedItem.advocacy_groups)}}},[e._v(" mdi-trash-can-outline ")])]}}])}),i("v-card-subtitle",[i("h4",[e._v("Categories")])]),i("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.categoriesHeaders,items:e.editedItem.categories,"item-key":"id","sort-by":["name"]},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItemFrom(a,e.editedItem.categories)}}},[e._v(" mdi-trash-can-outline ")])]}}])}),i("v-card-subtitle",[i("h4",[e._v("Locations")])]),i("v-data-table",{staticClass:"elevation-4",attrs:{label:"Locations",headers:e.locationsHeaders,items:e.editedItem.geospatial_pertinence,"item-key":"id","sort-by":["name"]},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItemFrom(a,e.editedItem.geospatial_pertinence)}}},[e._v(" mdi-trash-can-outline ")])]}}])}),i("v-card-subtitle",[i("h4",[e._v("Officials")])]),i("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.officialsHeaders,items:e.editedItem.officials,"item-key":"id","sort-by":["name"]},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItemFrom(a,e.editedItem.officials)}}},[e._v(" mdi-trash-can-outline ")])]}}])}),i("v-card-subtitle",[i("h4",[e._v("Publications")])]),i("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.publicationsHeaders,items:e.editedItem.publications,"item-key":"id","sort-by":["title"]},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItemFrom(a,e.editedItem.publications)}}},[e._v(" mdi-trash-can-outline ")])]}}])}),i("v-card-subtitle",[i("h4",[e._v("Video Testimonials")])]),i("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.videoTestimonialsHeaders,items:e.editedItem.video_testimonials,"item-key":"id","sort-by":["subject"]},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItemFrom(a,e.editedItem.video_testimonials)}}},[e._v(" mdi-trash-can-outline ")])]}}])}),i("v-card-subtitle",[i("h4",[e._v("Related Artifacts")])]),i("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.relatedArtifactsHeaders,items:e.editedItem.related,"item-key":"id","sort-by":["title"]},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItemFrom(a,e.editedItem.related)}}},[e._v(" mdi-trash-can-outline ")])]}}])})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeVectorEdit}},[e._v(" Close ")])],1)],1)],1),i("v-dialog",{model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v(" Are you sure you want to delete this item? ")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),i("v-spacer")],1)],1)],1)]},proxy:!0},{key:"item.link_to_full_text",fn:function(t){var a=t.item;return[i("v-btn",{attrs:{icon:"",disabled:!e.isUrl(a.link_to_full_text),href:a.link_to_full_text}},[i("v-icon",{attrs:{left:""}},[e._v("mdi-open-in-new")])],1)]}},{key:"item.date_introduced",fn:function(t){var i=t.item;return[e._v(" "+e._s(new Date(i.date_introduced).toLocaleDateString())+" ")]}},{key:"expanded-item",fn:function(t){var a=t.headers,n=t.item;return[i("td",{attrs:{colspan:a.length}},[e._v(" "+e._s(n.summary)+" ")])]}},{key:"item.actions",fn:function(t){var a=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pencil-outline ")]),i("v-icon",{attrs:{small:""},on:{click:function(t){return e.editVectors(a)}}},[e._v(" mdi-vector-link ")]),i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteDialog(a)}}},[e._v(" mdi-trash-can-outline ")])]}}])})],1)],1)},n=[],s=(i("99af"),i("c975"),i("a434"),i("d3b7"),i("2ca0"),i("5530")),r=(i("96cf"),i("1da1")),c={name:"artifact-table",data:function(){return{items:[],dialogEdit:!1,dialogVectors:!1,dialogDelete:!1,editedIndex:-1,editedItem:{},cachedItem:{},search:"",showInvalid:{title:!1,summary:!1},headers:[{text:"ID",value:"id",filterable:!0,width:"1%"},{text:"Title",value:"title",filterable:!0,width:"50%"},{text:"URL",value:"link_to_full_text",filterable:!0,width:"1%"},{text:"Status",value:"status",filterable:!0,width:"1%"},{text:"Date Introduced",value:"date_introduced",filterable:!0,width:"1%"},{text:"Actions",value:"actions",width:"15%",align:"center",sortable:!1}],advocacyGroupsHeaders:[{text:"ID",value:"id",filterable:!0,width:"1%",align:"start"},{text:"Name",value:"name",filterable:!0,width:"50%",align:"start"},{text:"Description",value:"description",width:"50%",align:"start"},{text:"Actions",value:"actions",width:"1%"}],categoriesHeaders:[{text:"ID",value:"id",align:"start"},{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"Actions",value:"actions"}],locationsHeaders:[{text:"ID",value:"id"},{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"Actions",value:"actions"}],officialsHeaders:[{text:"ID",value:"id"},{text:"Name",value:"name"},{text:"Title",value:"title"},{text:"Actions",value:"actions"}],publicationsHeaders:[{text:"ID",value:"id"},{text:"Title",value:"title"},{text:"Description",value:"description"},{text:"Actions",value:"actions"}],videoTestimonialsHeaders:[{text:"ID",value:"id"},{text:"Subject",value:"subject"},{text:"Comment",value:"comment"},{text:"Actions",value:"actions"}],relatedArtifactsHeaders:[{text:"ID",value:"id"},{text:"Title",value:"title"},{text:"Actions",value:"actions"}]}},mounted:function(){this.getItems()},methods:{isUrl:function(e){return!!e&&e.length>7&&e.startsWith("http")},getItems:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/v1/legislativeArtifacts");case 3:return i=t.sent,t.next=6,i.json();case 6:e.items=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},editMode:function(e){this.cachedItem=Object(s["a"])({},e)},cancelEdit:function(e){Object.assign(e,this.cachedItem),this.items.splice(this.editedIndex,1,this.cachedItem),this.dialogEdit=!1},editItem:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.editMode(e),t.editedIndex=t.items.indexOf(e),t.editedItem=e,t.dialogEdit=!0;case 4:case"end":return i.stop()}}),i)})))()},closeVectorEdit:function(){this.dialogVectors=!1},editVectors:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.editMode(e),t.editedIndex=t.items.indexOf(e),i.next=4,t.getItem(e.id);case 4:t.editedItem=i.sent,t.dialogVectors=!0;case 6:case"end":return i.stop()}}),i)})))()},getItem:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/v1/legislativeArtifacts/fullDetail/".concat(e));case 3:return i=t.sent,t.next=6,i.json();case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t["catch"](0),console.error(t.t0),t.abrupt("return",{});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},deleteIt:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Sending delete..."),t.next=4,fetch(e,{method:"DELETE"});case 4:return i=t.sent,t.next=7,i.json();case 7:a=t.sent,console.log("Result:",a),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},deleteItem:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.deleteIt("/api/v1/legislativeArtifacts/fullDetail/".concat(e));case 3:i.next=8;break;case 5:i.prev=5,i.t0=i["catch"](0),console.error(i.t0);case 8:case"end":return i.stop()}}),i,null,[[0,5]])})))()},deleteItemFrom:function(e,t){var i;switch(console.log("deleting item from vector..."),console.log("ITEM: ",e),console.log("ITEMs: ",t),t){case this.editedItem.advocacy_groups:i="/api/v1/adminIntersections/advocacyGroup/".concat(this.editedItem.id,"/").concat(e.id);break;case this.editedItem.categories:i="/api/v1/adminIntersections/category/".concat(this.editedItem.id,"/").concat(e.id);break;case this.editedItem.geospatial_pertinence:i="/api/v1/adminIntersections/geospatialDefinition/".concat(this.editedItem.id,"/").concat(e.id);break;case this.editedItem.officials:i="/api/v1/adminIntersections/official/".concat(this.editedItem.id,"/").concat(e.id);break;case this.editedItem.publications:i="/api/v1/adminIntersections/publication/".concat(this.editedItem.id,"/").concat(e.id);break;case this.editedItem.video_testimonials:i="/api/v1/adminIntersections/videoTestimonial/".concat(this.editedItem.id,"/").concat(e.id);break;case this.editedItem.related:i="/api/v1/adminIntersections/relatedArtifact/".concat(this.editedItem.id,"/").concat(e.id);break;default:return void console.error("deleteItemFrom() did not recognize the vector")}this.deleteIt(i),t.splice(t.indexOf(e),1)},deleteDialog:function(e){this.editedIndex=this.items.indexOf(e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this.items[this.editedIndex];this.deleteItem(e.id),this.items.splice(this.editedIndex,1),this.closeDelete()},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedIndex=-1}))},save:function(){this.updateItem(this.items[this.editedIndex]),this.dialogEdit=!1},cancel:function(e){this.cancelEdit(e)},open:function(){console.log("open()")},close:function(){console.log("Dialog closed"),this.dialogEdit=!1,console.log("close()")},updateItem:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,fetch("/api/v1/legislativeArtifacts/".concat(e.id),{method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});case 3:t.items.splice(t.editedIndex,1,e),i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.error(i.t0);case 9:case"end":return i.stop()}}),i,null,[[0,6]])})))()}}},o=c,d=(i("fb0f"),i("2877")),l=i("6544"),u=i.n(l),m=i("7496"),v=i("8336"),f=i("b0af"),h=i("99d9"),p=i("8fea"),I=i("169a"),b=i("132d"),x=i("2fa4"),_=i("8654"),g=Object(d["a"])(o,a,n,!1,null,"537aad4e",null);t["default"]=g.exports;u()(g,{VApp:m["a"],VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardSubtitle:h["b"],VCardTitle:h["d"],VDataTable:p["a"],VDialog:I["a"],VIcon:b["a"],VSpacer:x["a"],VTextField:_["a"]})},ad57:function(e,t,i){},fb0f:function(e,t,i){"use strict";var a=i("ad57"),n=i.n(a);n.a}}]);
//# sourceMappingURL=artifacts.a2f128f9.js.map